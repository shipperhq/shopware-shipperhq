(function(){"use strict";var e={};e.p="bundles/shqrateprovider/",window?.__sw__?.assetPath&&(e.p=window.__sw__.assetPath+"/bundles/shqrateprovider/"),function(){var e=JSON.parse('{"shqApiRefreshMethodsButton":{"buttonLabel":"Refresh Methods","success":"Erfolg","successMessage":"Verbindung wurde erfolgreich getestet","error":"Fehler","errorMessage":"Verbindung konnte nicht hergestellt werden. Bitte pr\xfcfen Sie Ihre Zugangsdaten","missingCredentials":"Bitte geben Sie zuerst API Key und Authentifizierungscodes ein"},"shqApiTestButton":{"buttonLabel":"API-Verbindung testen","success":"Erfolg","successMessage":"Erfolgreich mit ShipperHQ API verbunden","error":"Fehler","errorMessage":"Verbindung konnte nicht hergestellt werden. Bitte pr\xfcfen Sie Ihre Zugangsdaten","missingCredentials":"Bitte geben Sie zuerst API Key und Authentifizierungscodes ein"}}'),t=JSON.parse('{"shqApiRefreshMethodsButton":{"buttonLabel":"Reload Shipping Methods","success":"Success","successMessage":"Shipping Methods Successfully Reloaded","error":"Error","errorMessage":"Could not connect. Please check your credentials","missingCredentials":"Please enter API Key and Authentication Code first"},"shqApiTestButton":{"buttonLabel":"Test API Connection","success":"Success","successMessage":"Successfully connected to ShipperHQ API","error":"Error","errorMessage":"Could not connect to ShipperHQ API","missingCredentials":"Please enter API Key and Authentication Code first"}}');let s=Shopware.Classes.ApiService;var i=class extends s{constructor(e,t,s="shq-api-test"){super(e,t,s)}testConnection(e){let t=this.getBasicHeaders();return console.log("testConnection inside service"),this.httpClient.post(`_action/${this.getApiBasePath()}/test-connection`,e,{headers:t}).then(e=>s.handleResponse(e))}refreshMethods(e){let t=this.getBasicHeaders();return console.log("refreshMethods"),this.httpClient.post(`_action/${this.getApiBasePath()}/refresh-methods`,e,{headers:t}).then(e=>s.handleResponse(e))}};Shopware.Component.register("shq-api-test-button",{template:'<sw-button\n    :is-loading="isLoading"\n    variant="primary"\n    :square="false"\n    @click="check"\n>\n    {{ $tc(\'shqApiTestButton.buttonLabel\') }}\n</sw-button> ',props:["label"],inject:["ShipperHQApiService"],mixins:[Shopware.Mixin.getByName("notification")],data(){return{isLoading:!1}},computed:{pluginConfig(){let e=this.$parent;for(;void 0===e.actualConfigData;)e=e.$parent;return e.actualConfigData.null}},methods:{check(){if(!this.pluginConfig["SHQRateProvider.config.apiKey"]||!this.pluginConfig["SHQRateProvider.config.authenticationCode"]){this.createNotificationError({title:this.$tc("shqApiTestButton.error"),message:this.$tc("shqApiTestButton.missingCredentials")});return}this.isLoading=!0,this.ShipperHQApiService.testConnection({apiKey:this.pluginConfig["SHQRateProvider.config.apiKey"],authenticationCode:this.pluginConfig["SHQRateProvider.config.authenticationCode"]}).then(e=>{console.log(e),e.success?this.createNotificationSuccess({title:this.$tc("shqApiTestButton.success"),message:this.$tc("shqApiTestButton.successMessage")}):this.createNotificationError({title:this.$tc("shqApiTestButton.error"),message:e.message||this.$tc("shqApiTestButton.errorMessage")})}).catch(e=>{this.createNotificationError({title:this.$tc("shqApiTestButton.error"),message:e.message||this.$tc("shqApiTestButton.errorMessage")})}).finally(()=>{this.isLoading=!1})}}}),Shopware.Component.register("shq-api-refresh-methods-button",{template:'<sw-button\n    :is-loading="isLoading"\n    variant="primary"\n    :square="false"\n    @click="refreshMethods"\n>\n    {{ $tc(\'shqApiRefreshMethodsButton.buttonLabel\') }}\n</sw-button>\n',props:["label"],inject:["ShipperHQApiService"],mixins:[Shopware.Mixin.getByName("notification")],data(){return{isLoading:!1}},computed:{pluginConfig(){let e=this.$parent;for(;void 0===e.actualConfigData;)e=e.$parent;return e.actualConfigData.null}},methods:{async refreshMethods(){try{if(console.log("in refreshMethods in index.js"),!this.pluginConfig["SHQRateProvider.config.apiKey"]||!this.pluginConfig["SHQRateProvider.config.authenticationCode"]){this.createNotificationError({title:this.$tc("shqApiRefreshMethodsButton.error"),message:this.$tc("shqApiRefreshMethodsButton.missingCredentials")});return}this.isLoading=!0,this.processSuccess=!1;let e=await this.ShipperHQApiService.refreshMethods({apiKey:this.pluginConfig["SHQRateProvider.config.apiKey"],authenticationCode:this.pluginConfig["SHQRateProvider.config.authenticationCode"]});if(e&&e.success)this.processSuccess=!0,this.createNotificationSuccess({title:this.$tc("shqApiRefreshMethodsButton.success"),message:this.$tc("shqApiRefreshMethodsButton.successMessage")});else throw Error(e.error||"Unknown error occurred")}catch(e){console.error("Error in refresh methods:",e),this.processSuccess=!1,this.createNotificationError({title:this.$tc("shqApiRefreshMethodsButton.error"),message:e.message||this.$tc("shqApiRefreshMethodsButton.errorMessage")})}finally{this.isLoading=!1,setTimeout(()=>{this.processSuccess=!1},2500)}}}}),Shopware.Component.override("sw-order-detail-state-card",{template:'{% block sw-card__content %}\n    {{ parent() }}\n    <div class="sw-field sw-block-field sw-field--default sw-contextual-field sw-field--datepicker" label="Dispatch date">\n        <div class="sw-field__label">\n            <label class="">Dispatch date</label>\n        </div>\n        <div class="sw-block-field__block">\n            <input type="text" placeholder="Y-m-d" class="form-control input" value="2024-04-26">\n            <div class="sw-field__addition">\n                <span class="sw-icon sw-icon--fill icon--regular-calendar" data-testid="sw-icon__regular-calendar">\n                    <svg id="meteor-icon-kit__regular-calendar" viewBox="0 0 22 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n                        <path fill-rule="evenodd" clip-rule="evenodd" d="M20 6V5C20 4.44772 19.5523 4 19 4H3C2.44772 4 2 4.44772 2 5V6H20zM20 8H2V21C2 21.5523 2.44772 22 3 22H19C19.5523 22 20 21.5523 20 21V8zM18 2H19C20.6569 2 22 3.34315 22 5V21C22 22.6569 20.6569 24 19 24H3C1.34315 24 0 22.6569 0 21V5C0 3.34315 1.34315 2 3 2H4V1C4 0.447715 4.44772 0 5 0C5.55228 0 6 0.447715 6 1V2H16V1C16 0.447715 16.4477 0 17 0C17.5523 0 18 0.447715 18 1V2zM5 18C5.55228 18 6 18.4477 6 19C6 19.5523 5.55228 20 5 20C4.44772 20 4 19.5523 4 19C4 18.4477 4.44772 18 5 18zM9 18C9.5523 18 10 18.4477 10 19C10 19.5523 9.5523 20 9 20C8.44771 20 8 19.5523 8 19C8 18.4477 8.44771 18 9 18zM13 18C13.5523 18 14 18.4477 14 19C14 19.5523 13.5523 20 13 20C12.4477 20 12 19.5523 12 19C12 18.4477 12.4477 18 13 18zM5 14C5.55228 14 6 14.4477 6 15C6 15.5523 5.55228 16 5 16C4.44772 16 4 15.5523 4 15C4 14.4477 4.44772 14 5 14zM9 14C9.5523 14 10 14.4477 10 15C10 15.5523 9.5523 16 9 16C8.44771 16 8 15.5523 8 15C8 14.4477 8.44771 14 9 14zM13 14C13.5523 14 14 14.4477 14 15C14 15.5523 13.5523 16 13 16C12.4477 16 12 15.5523 12 15C12 14.4477 12.4477 14 13 14zM5 10C5.55228 10 6 10.4477 6 11C6 11.5523 5.55228 12 5 12C4.44772 12 4 11.5523 4 11C4 10.4477 4.44772 10 5 10zM9 10C9.5523 10 10 10.4477 10 11C10 11.5523 9.5523 12 9 12C8.44771 12 8 11.5523 8 11C8 10.4477 8.44771 10 9 10zM13 10C13.5523 10 14 10.4477 14 11C14 11.5523 13.5523 12 13 12C12.4477 12 12 11.5523 12 11C12 10.4477 12.4477 10 13 10zM17 18C17.5523 18 18 18.4477 18 19C18 19.5523 17.5523 20 17 20C16.4477 20 16 19.5523 16 19C16 18.4477 16.4477 18 17 18zM17 14C17.5523 14 18 14.4477 18 15C18 15.5523 17.5523 16 17 16C16.4477 16 16 15.5523 16 15C16 14.4477 16.4477 14 17 14zM17 10C17.5523 10 18 10.4477 18 11C18 11.5523 17.5523 12 17 12C16.4477 12 16 11.5523 16 11C16 10.4477 16.4477 10 17 10z" fill="#758CA3"></path>\n                    </svg>\n                </span>\n            </div>\n        </div>\n    </div>\n{% endblock %}'}),Shopware.Locale.extend("de-DE",e),Shopware.Locale.extend("en-GB",t),Shopware.Service().register("ShipperHQApiService",()=>new i(Shopware.Application.getContainer("init").httpClient,Shopware.Service("loginService")))}()})();