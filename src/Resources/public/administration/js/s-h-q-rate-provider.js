!function(){"use strict";var e={};e.p="bundles/shqrateprovider/",window?.__sw__?.assetPath&&(e.p=window.__sw__.assetPath+"/bundles/shqrateprovider/"),function(){var e=JSON.parse('{"shqApiRefreshMethodsButton":{"buttonLabel":"Check","title":"Refresh Methods","success":"Verbindung wurde erfolgreich getestet","error":"Verbindung konnte nicht hergestellt werden. Bitte pr\xfcfen Sie Ihre Zugangsdaten"}}'),t=JSON.parse('{"shqApiRefreshMethodsButton":{"buttonLabel":"Check","title":"Refresh Methods","success":"Connection was successfully tested","error":"Could not connect. Please check your credentials"},"shqApiTestButton":{"buttonLabel":"Test API Connection","success":"Success","successMessage":"Successfully connected to ShipperHQ API","error":"Error","errorMessage":"Could not connect to ShipperHQ API","missingCredentials":"Please enter API Key and Authentication Code first"}}');let s=Shopware.Classes.ApiService;var i=class extends s{constructor(e,t,s="shipperhq"){super(e,t,s)}testConnection(e){let t=this.getBasicHeaders();return this.httpClient.post(`_action/${this.getApiBasePath()}/test-connection`,e,{headers:t}).then(e=>s.handleResponse(e))}};let n=Shopware.Service("ShipperHQApiService");Shopware.Component.register("shq-api-test-button",{template:'<sw-button-process\n        :isLoading="isLoading"\n        :processSuccess="isSaveSuccessful"\n        @process-finish="saveFinish"\n        @click="check"\n        variant="primary"\n        size="small"\n>\n    {{ $tc(\'shqApiTestButton.buttonLabel\') }}\n</sw-button-process> ',mixins:[Shopware.Mixin.getByName("notification")],data(){return{isLoading:!1,isSaveSuccessful:!1}},computed:{pluginConfig(){let e=this.$parent;for(;void 0===e.actualConfigData;)e=e.$parent;return e.actualConfigData.null}},methods:{saveFinish(){this.isSaveSuccessful=!1},check(){if(console.log("check"),!this.pluginConfig.apiKey||!this.pluginConfig.authenticationCode){this.createNotificationError({title:this.$tc("shqApiTestButton.error"),message:this.$tc("shqApiTestButton.missingCredentials")});return}this.isLoading=!0,n.testConnection({apiKey:this.pluginConfig.apiKey,authenticationCode:this.pluginConfig.authenticationCode}).then(e=>{e.success?(this.isSaveSuccessful=!0,this.createNotificationSuccess({title:this.$tc("shqApiTestButton.success"),message:this.$tc("shqApiTestButton.successMessage")})):this.createNotificationError({title:this.$tc("shqApiTestButton.error"),message:e.message||this.$tc("shqApiTestButton.errorMessage")})}).catch(e=>{this.createNotificationError({title:this.$tc("shqApiTestButton.error"),message:e.message||this.$tc("shqApiTestButton.errorMessage")})}).finally(()=>{this.isLoading=!1})}}}),Shopware.Locale.extend("de-DE",e),Shopware.Locale.extend("en-GB",t);let o=new i;Shopware.Application.addServiceProvider("ShipperHQApiService",()=>o)}()}();